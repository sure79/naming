<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ìˆ˜ë¹„í•™ ì´ë¦„ ê¶í•©ë¶„ì„ê¸°</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  <style>
    :root {
      --primary: #4f46e5;
      --primary-dark: #4338ca;
      --secondary: #a855f7;
      --text-primary: #1f2937;
      --text-secondary: #4b5563;
      --background: #f9fafb;
      --card-background: #ffffff;
      --error: #ef4444;
      --success: #10b981;
      --border: #e5e7eb;
      --shadow: rgba(0, 0, 0, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
      background: var(--background);
      color: var(--text-primary);
      line-height: 1.7;
      min-height: 100vh;
    }

    .container {
      max-width: 1000px;
      margin: 2rem auto;
      padding: 2rem 1.5rem;
    }

    .card {
      background: var(--card-background);
      border-radius: 1.5rem;
      padding: 2.5rem 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease;
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      text-align: center;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: -0.025em;
    }

    .intro-text {
      text-align: center;
      font-size: 1.05rem;
      color: var(--text-secondary);
      margin-bottom: 2rem;
    }

    h2 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
      margin: 2rem 0 1.5rem;
      letter-spacing: -0.025em;
    }

    .input-group {
      margin: 2rem 0;
    }

    input {
      width: 100%;
      padding: 1rem 1.5rem;
      font-size: 1.1rem;
      border: 2px solid var(--border);
      border-radius: 1rem;
      background: #f8fafc;
      transition: all 0.3s ease;
    }

    input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1);
      background: white;
    }

    input::placeholder {
      color: #94a3b8;
    }

    button {
      width: 100%;
      padding: 1rem 1.5rem;
      font-size: 1.1rem;
      font-weight: 600;
      color: white;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: none;
      border-radius: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 1rem;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(79, 70, 229, 0.3);
    }

    button:active {
      transform: translateY(0);
    }

    .result {
      display: none;
      animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .error {
      display: none;
      color: var(--error);
      background: #fef2f2;
      border: 1px solid #fee2e2;
      padding: 1rem;
      border-radius: 1rem;
      text-align: center;
      margin: 1rem 0;
      font-weight: 500;
      animation: shake 0.5s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .recommended-names {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }

    .name-card {
      background: white;
      padding: 1.5rem;
      border-radius: 1rem;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
      border: 1px solid var(--border);
    }

    .name-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    .name-card .name {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
      letter-spacing: -0.025em;
    }

    .name-card .compatibility-score {
      font-size: 1.1rem;
      color: var(--primary);
      font-weight: 600;
      margin: 0.5rem 0;
    }

    .name-card .number-info {
      color: var(--text-secondary);
      font-size: 0.95rem;
      line-height: 1.5;
    }

    #analysis {
      background: #f8fafc;
      padding: 1.5rem;
      border-radius: 1rem;
      border: 1px solid var(--border);
    }

    #analysis p {
      margin-bottom: 1rem;
    }

    #analysis strong {
      color: var(--primary);
    }

    #analysis hr {
      margin: 1rem 0;
      border: none;
      border-top: 1px solid var(--border);
    }

    @media (max-width: 768px) {
      .container {
        padding: 1rem;
        margin: 1rem;
      }

      .card {
        padding: 1.5rem 1rem;
      }

      h1 {
        font-size: 2rem;
      }

      .recommended-names {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 1rem;
      }

      .name-card .name {
        font-size: 1.5rem;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 1.8rem;
      }

      .recommended-names {
        grid-template-columns: 1fr;
      }

      .name-card {
        padding: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>ìˆ˜ë¹„í•™ ì´ë¦„ ê¶í•©ë¶„ì„ê¸°</h1>
      <p class="intro-text">
        ë‹¹ì‹ ì˜ ì´ë¦„ê³¼ ë§ëŠ” ê¸€ìë¥¼ ì•Œë ¤ ë“œë¦½ë‹ˆë‹¤. <br/>
        <strong>ì´ ê¸€ìê°€ ì´ë¦„ì— ë“¤ì–´ ìˆë‹¤ë©´ ì²œìƒì—°ë¶„!</strong>
      </p>
      
      <div class="input-group">
        <input 
          type="text" 
          id="nameInput" 
          placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ê¹€ë¯¼ì„œ)" 
          maxlength="5"
          autocomplete="off"
        />
        <button onclick="analyzeName()">ë¶„ì„í•˜ê¸°</button>
      </div>

      <div id="error" class="error"></div>

      <div id="result" class="result">
        <h2>âœ¨ ë¶„ì„ ê²°ê³¼</h2>
        <div id="analysis"></div>
        <h2>ğŸ¯ ê¶í•©ì´ ì¢‹ì€ ê¸€ì TOP 30</h2>
        <div id="recommendedNames" class="recommended-names"></div>
      </div>
    </div>
  </div>

  <script>
    // ----------------------------
    // [ì‚¬ì£¼ë²ˆí˜¸] nameToNumber
    // ----------------------------
    const nameToNumber = {
      // í”íˆ ì“°ì´ëŠ” ì„±(20ê°œ)
      'ê¹€': 3, 'ì´': 9, 'ë°•': 8, 'ìµœ': 7, 'ì •': 6, 'ê°•': 8, 'ì¡°': 9, 'ìœ¤': 10, 'ì¥': 9, 'ì„': 3,
      'í•œ': 10, 'ì˜¤': 8, 'ì„œ': 9, 'ì‹ ': 11, 'ê¶Œ': 8, 'í™©': 8, 'ì•ˆ': 10, 'ì†¡': 8, 'ì „': 10, 'í™': 9,

      // ì´í•˜ ì´ë¦„ ìŒì ˆ ì˜ˆì‹œ
      'ì€': 2,

      // 3ë²ˆ (ì—¬í™©ì œ)
      'ë¯¼': 3, 'ì„': 3, 'ë…¸': 3, 'ëª¨': 3, 'ì‚¼': 3, 'ë¬µ': 3, 
      'ë¬¸': 3, 'ë¯¸': 3, 'ëˆ„': 3, 'í ': 3, 'ì›€': 3, 'ì ': 3,
      'ë¬´': 3, 'ê²¸': 3, 'ë¦¼': 3, 'ë§¤': 3, 'ë§¹': 3, 
      'ë‚˜': 3, 'ë‚¨': 3, 'ë§ˆ': 3, 'ëª…': 3, 'ëª©': 3,
      'ê¹€': 3, 'ê¸ˆ': 3, 'ë§‰': 3, 'ë´„': 3, 'ë‚´': 3,
      
      // 4ë²ˆ (í™©ì œ)
      'ì„': 4, 'ë¡œ': 4, 'í•™': 4, 'ìŠ¬': 4, 
      'ë¼': 4, 'ì¢…': 4, 'ë£¨': 4, 'ì¼': 4,
      'ì‹': 4, 'ë˜': 4, 'ë¡€': 4, 'ë¡': 4,
      'ì†Œ': 4, 'ë¦¬': 4, 'ë§': 4, 'ë€': 4,
      'ìˆ™': 4, 'ê·¼': 4, 'ì†”': 4, 'ìˆœ': 4,
      
      // 5ë²ˆ (êµí™©)
      'íƒœ': 5, 'íƒ': 5, 'ê·œ': 5, 'ë¶„': 5, 'ë”': 5, 'ë˜': 5, 'ë§Œ': 5, 'ì—½': 5, 'í‰': 5, 'íš¨': 5,
      'í›ˆ': 5, 'ë„': 5, 'ë´„': 5, 'ë‹¤': 5, 'ë‘”': 5, 'ë ¹': 5, 'ë´‰': 5, 'íƒ': 5, 'íƒ„': 5,
      'ëŒ€': 5, 'ë•': 5, 'ë³´': 5, 'ë‹¨': 5, 'ë“': 5, 'ë ¨': 5, 'ìš´': 5, 'í¸': 5, 'ì„­': 5,
      'ë³µ': 5, 'í•„': 5, 'ë‹´': 5, 'ë“¬': 5, 'ë ´': 5, 'ì—„': 5, 'í‘œ': 5, 'í¬': 5,
      'ëˆ': 5, 'ë‘': 5, 'ê°‘': 5, 'ë‹¹': 5, 'ë”˜': 5, 'í›„': 5, 'ìš±': 5, 'íŒ½': 5,
      
      // 6ë²ˆ (ì—°ì¸)
      'ì •': 6,
      
      // 7ë²ˆ (ì „ì°¨)
      'ìµœ': 7, 'ë™': 7, 'ì°¨': 7, 'ì¶”': 7, 'ê±´': 7,
      'ì±„': 7, 'í™”': 7, 'ì¢Œ': 7, 'ì°¬': 7, 'í•˜': 7, 'ì¤€': 7,
      
      // 8ë²ˆ (í˜)
      'ë°•': 8, 'ê°€': 8, 'ëŒ': 8, 'í˜œ': 8, 'ëŠ˜': 8, 'í˜¸': 8, 'í•´': 8, 'ì˜ˆ': 8, 'ì¤‘': 8, 
      'ê°•': 8, 'ìœ¨': 8, 'ìš©': 8, 'ì†¡': 8, 'ì‘': 8, 'ì‚¬': 8, 'ë³‘': 8, 'ì—´': 8, 'ë¹„': 8,
      'ì–‘': 8, 'ë°±': 8, 'ìŠ¹': 8, 'ì˜¥': 8, 'ì„': 8, 'ìƒ': 8, 'ì˜¤': 8, 'í¥': 8, 'ê±°': 8,
      'ê¶Œ': 8, 'í˜•': 8, 'ì˜': 8, 'ë²”': 8, 'ê³ ': 8, 'ë°°': 8, 'ë‘': 8, 'ë¹›': 8, 'ê²°': 8, 'í™©': 8,

      // 9ë²ˆ (ì€ë‘”ì)
      'ìˆœ': 9, 'ì •': 9, 'ì´': 9, 'ì„œ': 9, 'ì„ ': 9, 'ì—¬': 9, 'ë…€': 9, 'ì¡´': 9, 'íšŒ': 9,
      'ì§€': 9, 'í–¥': 9, 'ì¥': 9, 'ì œ': 9, 'ì£¼': 9, 'ì² ': 9, 'ë‹˜': 9, 'ì‹¬': 9,
      'ìˆ˜': 9, 'ì¡°': 9, 'ì¬': 9, 'ì„±': 9, 'ì': 9, 'ê¸°': 9, 'ì‹¤': 9, 'ì°°': 9, 'ì–´': 9,
      'í¬': 9, 'í™': 9, 'ìœ ': 9, 'ìš°': 9, 'ì–¸': 9, 'ê·€': 9, 'ì¶˜': 9, 'ì„¤': 9,
      'ê¸¸': 9, 'í–‰': 9, 'íœ´': 9, 'í—Œ': 9, 'ì ': 9, 'í—ˆ': 9, 'ê°ˆ': 9,
      
      // 10ë²ˆ (ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´)
      'ì•ˆ': 10, 'ì—°': 10, 'í™˜': 10, 'ìœ¤': 10, 'ì¸': 10, 'ë€': 10,
      'ì›': 10, 'ë¹ˆ': 10, 'ë¡ ': 10, 'ì™„': 10, 'ì „': 10, 'ì˜¨': 10,
      'ë¦°': 10, 'í•œ': 10, 'ì†': 10,
      
      // 11ë²ˆ (ì •ì˜)
      'í˜„': 11, 'ì§„': 11, 'ê²½': 11, 'ê·¹': 11, 'ì‹ ': 11, 'ì²­': 11, 'í”¼': 11, 'ì—¼': 11,
      'í‚¤': 11, 'ì°½': 11, 'ê°„': 11, 'ë‹·': 11, 'ì‹¬': 11, 'ì²™': 11, 'íƒ€': 11, 'ìŒ': 11,
      'ì²œ': 11, 'ì„¸': 11, 'ê°': 11, 'ë³¸': 11, 'ì…˜': 11, 'ì²¨': 11, 'íƒ': 11, 'í’ˆ': 11,
      'ìœ„': 11, 'ê· ': 11, 'ê²¬': 11, 'ë²¼': 11, 'ìˆ€': 11, 'ì´ˆ': 11, 'íŒŒ': 11, 'ì´': 11,
      'ì˜': 11, 'ê²€': 11, 'ê³¤': 11, 'ë³€': 11, 'ì§': 11, 'ì¹´': 11, 'íŒ': 11, 'íœ˜': 11
    };

    // ìˆ«ì ê¶í•© í…Œì´ë¸”
    const numberCompatibility = {
      2:  [4, 8, 11],
      3:  [6, 9],
      4:  [2, 7, 10],
      5:  [3, 8, 11],
      6:  [3, 9],
      7:  [4, 10],
      8:  [2, 5, 11],
      9:  [3, 6],
      10: [4, 7],
      11: [2, 5, 8]
    };

    // ìˆ«ìë³„ ê°„ë‹¨í•œ íƒ€ë¡œ ì˜ë¯¸
    const tarotMeanings = {
      2:  "ì—¬ì‚¬ì œ - ì°¨ë¶„í•˜ê³  ì§ê´€ì ì¸ ì„±í–¥",
      3:  "ì—¬í™©ì œ - í’ìš”ë¡­ê³  ì°½ì¡°ì ì¸ ì„±í–¥",
      4:  "í™©ì œ - ë¦¬ë”ì‹­ê³¼ ê¶Œìœ„ê°€ ìˆëŠ” ì„±í–¥",
      5:  "êµí™© - ì „í†µê³¼ ê°€ë¥´ì¹¨ì„ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥",
      6:  "ì—°ì¸ - ì¡°í™”ë¡­ê³  ì‚¬ë‘ì„ ì¶”êµ¬í•˜ëŠ” ì„±í–¥",
      7:  "ì „ì°¨ - ë„ì „ì ì´ê³  ì§„ì·¨ì ì¸ ì„±í–¥",
      8:  "í˜ - ê°•ì¸í•œ ì¸ë‚´ì‹¬ê³¼ ìš©ê¸°ë¥¼ ê°–ì¶˜ ì„±í–¥",
      9:  "ì€ë‘”ì - ì§€í˜œë¡­ê³  ê¹Šì€ ë‚´ë©´ ì„±ì°°ì„ ì§€ë‹Œ ì„±í–¥",
      10: "ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´ - ë³€í™”ì— ìœ ì—°í•˜ê³  ìš´ì„ ì˜ íƒ€ëŠ” ì„±í–¥",
      11: "ì •ì˜ - ê³µì •í•˜ê³  ë…¼ë¦¬ì ì¸ ì„±í–¥"
    };

    // ë¶„ì„í•˜ê¸° ë©”ì¸ í•¨ìˆ˜
    function analyzeName() {
      const input = document.getElementById('nameInput').value.trim();
      const errorDiv = document.getElementById('error');
      const resultDiv = document.getElementById('result');
      const analysisDiv = document.getElementById('analysis');
      const recommendedNamesDiv = document.getElementById('recommendedNames');

      // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
      function showError(msg) {
        errorDiv.style.display = 'block';
        errorDiv.textContent = msg;
        resultDiv.style.display = 'none';
      }

      // ì—ëŸ¬ ì´ˆê¸°í™”
      errorDiv.style.display = 'none';
      errorDiv.textContent = '';

      // ì…ë ¥ê°’ ê²€ì¦
      if (input.length === 0) {
        showError('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }
      if (input.length < 2) {
        showError('ìµœì†Œ 2ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      // ì´ë¦„ -> ìˆ«ì ë³€í™˜
      const originalNumbers = [];
      for (let char of input) {
        if (!nameToNumber[char]) {
          showError(`ë¶„ì„í•  ìˆ˜ ì—†ëŠ” ê¸€ì(${char})ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`);
          return;
        }
        originalNumbers.push(nameToNumber[char]);
      }

      // ê²°ê³¼ì°½ ë³´ì´ê¸°
      resultDiv.style.display = 'block';

      // ì¤‘ë³µ ì œê±°í•œ ìˆ«ì ëª©ë¡
      const uniqueNums = [...new Set(originalNumbers)];

      // ê° ìˆ«ìì— ëŒ€í•œ ê°„ë‹¨ ì„¤ëª…
      const tarotText = uniqueNums.map(num => {
        const meaning = tarotMeanings[num] || '(ì •ë³´ ì—†ìŒ)';
        return `
          <div>
            <strong>ìˆ«ì ${num}</strong><br>
            <em>${meaning}</em>
          </div>
        `;
      }).join("<hr>");

      // ë¶„ì„ ì„¹ì…˜
      analysisDiv.innerHTML = `
        <p><strong>"${input}"</strong> ì˜ ìˆ«ì ì¡°í•©:<br>
        <strong>${originalNumbers.join(' â†’ ')}</strong></p>
        ${tarotText}
      `;

      // ê¶í•©ì´ ì¢‹ì€ ê¸€ì TOP 30 ê³„ì‚°
      const recommendedList = recommendSingleChars(originalNumbers, 30);

      if (recommendedList.length === 0) {
        recommendedNamesDiv.innerHTML = "<p>ì¶”ì²œí•  ë§Œí•œ ê¸€ìê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
      } else {
        recommendedNamesDiv.innerHTML = recommendedList.map(item => `
          <div class="name-card animate__animated animate__fadeIn">
            <div class="name">${item.char}</div>
            <div class="compatibility-score">${item.score}ì </div>
            <div class="number-info">ìˆ«ì ${item.charNum}</div>
          </div>
        `).join('');
      }
    }

    // "í•œ ê¸€ì" ì¶”ì²œ í•¨ìˆ˜
    function recommendSingleChars(originalNumbers, count = 20) {
      const allChars = Object.keys(nameToNumber);

      // ê° ê¸€ìë³„ ê¶í•© ì ìˆ˜ ê³„ì‚°
      const scored = allChars.map(char => {
        const charNum = nameToNumber[char];
        const score = calculateCompatibilityScore(originalNumbers, charNum);
        return { char, charNum, score };
      });

      // ì ìˆ˜ê°€ 70ì  ì´ìƒë§Œ
      const filtered = scored.filter(item => item.score >= 70);

      // ì ìˆ˜ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
      filtered.sort((a, b) => b.score - a.score);

      // ìƒìœ„ countê°œ
      return filtered.slice(0, count);
    }

    // ê¶í•© ì ìˆ˜ ê³„ì‚°
    function calculateCompatibilityScore(originalNums, candidateNum) {
      let score = 70; // ê¸°ë³¸ ì ìˆ˜
      for (let on of originalNums) {
        const compArray = numberCompatibility[on];
        if (compArray && compArray.includes(candidateNum)) {
          score += 15;
          if (candidateNum === compArray[0]) {
            score += 10; 
          }
        }
      }
      return Math.min(score, 100);
    }
  </script>
</body>
</html>
